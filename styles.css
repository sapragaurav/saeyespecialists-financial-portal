body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; display: flex; justify-content: center; }
        .card { background: white; padding: 0; border-radius: 15px; box-shadow: 0 8px 24px rgba(0,0,0,0.1); width: 100%; max-width: 1250px; position: relative; overflow: hidden; min-height: 85vh; display: flex; flex-direction: column; }
        
        /* LOGIN */
        #loginSection { padding: 60px 30px; text-align: center; max-width: 400px; margin: auto; }
        .login-logo { max-width: 200px; margin-bottom: 20px; }
        .login-input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }

        /* HEADER */
        .app-header { background: #fff; border-bottom: 1px solid #dee2e6; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; height: 70px; }
        .header-logo { height: 45px; margin-right: 20px; }
        
        /* TABS */
        .tabs-area { display: flex; height: 100%; }
        .tab-btn { padding: 0 25px; border: none; background: none; cursor: pointer; font-size: 15px; font-weight: 600; color: #6c757d; border-bottom: 3px solid transparent; transition: 0.2s; height: 100%; }
        .tab-btn:hover { background: #f8f9fa; color: #0056b3; }
        .tab-btn.active { color: #0056b3; border-bottom: 3px solid #0056b3; background: #fff; }
        
        .user-area { display: flex; align-items: center; gap: 15px; border-left: 1px solid #eee; height: 100%; padding-left: 20px; }
        .logout-btn { color: #dc3545; background: #fff0f0; border: 1px solid #ffc9c9; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 13px; }

        /* CONTENT */
        .tab-content { display: none; padding: 30px; flex: 1; overflow-y: auto; }
        .tab-content.active { display: block; }
        
        /* DASHBOARD */
        .fy-selector { background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; border: 1px solid #bbdefb; }
        .dashboard-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .stat-card { background: #fff; border: 1px solid #eee; border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.03); transition: transform 0.2s; }
        .stat-card h3 { margin-top: 0; color: #555; font-size: 14px; text-transform: uppercase; }
        .big-num { font-size: 28px; font-weight: bold; color: #0056b3; margin: 10px 0; }
        .clickable-card { cursor: pointer; border: 1px solid #b3d7ff; }
        .clickable-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,86,179,0.15); }

        /* DATA TABLE */
        .filter-bar { background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px; display: flex; gap: 12px; align-items: center; border: 1px solid #eee; flex-wrap: wrap; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 10px; }
        th { background: #f1f3f5; padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6; }
        td { padding: 12px; border-bottom: 1px solid #eee; }
        .money-col { text-align: right; font-family: 'Courier New', monospace; font-weight: 600; }
        .total-row { font-weight: bold; background: #e7f3ff; font-size: 14px; }

        /* SETTINGS */
        .settings-container { display: flex; gap: 30px; height: 100%; min-height: 500px; border-top: 1px solid #f0f0f0; padding-top: 20px; }
        .doctor-list { width: 280px; border-right: 1px solid #eee; padding-right: 20px; overflow-y: auto; }
        .doctor-item { padding: 12px; border-radius: 8px; cursor: pointer; margin-bottom: 8px; border: 1px solid transparent; background: #fcfcfc; transition: 0.2s; }
        .doctor-item.selected { background: #e7f1ff; color: #0056b3; font-weight: bold; border-color: #0056b3; }
        .input-group { display: flex; gap: 10px; margin-bottom: 12px; align-items: center; background: #f8f9fa; padding: 10px; border-radius: 6px; }

        /* GLOBAL UTILS */
        .btn { padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: bold; }
        .btn-primary { background-color: #0056b3; color: white; }
        .btn-green { background-color: #28a745; color: white; }
        .btn-danger { background-color: #dc3545; color: white; padding: 5px 10px; }
        .btn-purple { background-color: #6f42c1; color: white; }
        .hidden { display: none; }
        .version-display { padding: 10px 20px; font-size: 11px; color: #999; border-top: 1px solid #eee; background: #fdfdfd; display: flex; justify-content: space-between; }
        /* --- NEW STYLES FOR PHASE 1 --- */
        
        /* 1. Sticky Table Headers */
        th { 
            position: sticky; 
            top: 0; 
            z-index: 100; 
            box-shadow: 0 2px 2px -1px rgba(0, 0, 0, 0.1); /* Adds a subtle shadow */
        }

        /* 2. Skeleton Loading Animation */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 4px;
            height: 20px;
            width: 100%;
            display: block;
        }

        /* 3. Table Wrapper Fix for Sticky Header */
        .table-wrapper {
            max-height: 65vh;  /* Limits height so the table scrolls internally */
            overflow: auto;    /* Handles both Horizontal and Vertical scroll */
            border: 1px solid #ddd;
            position: relative;
        }
        
        /* Ensure the sticky header has a solid background so text doesn't overlap */
        th {
            background-color: #f1f3f5; 
            /* We already added position: sticky in the previous step, so that applies here */
        }

        /* 4. Sticky Table Footer (Totals) */
        tfoot td {
            position: sticky;
            bottom: 0;
            z-index: 100; /* Keeps it on top of the scrolling data */
            background-color: #e7f3ff; /* Matches your existing total row color */
            border-top: 2px solid #0056b3; /* Adds a nice blue line to separate it */
            box-shadow: 0 -2px 4px rgba(0,0,0,0.1); /* Adds a shadow pointing up */
        }

        /* 5. Custom Modal Styling */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.5); z-index: 2000; 
            display: none; align-items: center; justify-content: center; 
        }
        .modal-box { 
            background: white; padding: 25px; border-radius: 12px; 
            width: 90%; max-width: 400px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
            text-align: center; animation: popIn 0.2s ease-out;
        }
        .modal-title { margin-top: 0; color: #0056b3; font-size: 18px; margin-bottom: 10px; }
        .modal-msg { margin: 0 0 25px; color: #555; font-size: 14px; line-height: 1.5; }
        .modal-actions { display: flex; gap: 10px; justify-content: center; }
        
        @keyframes popIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* 6. Analysis Control Bar */
        .analysis-controls {
            background: #f8f9fa; 
            padding: 15px; 
            border-radius: 8px; 
            margin-bottom: 20px; 
            border: 1px solid #dee2e6; 
            display: flex; 
            gap: 20px; 
            align-items: flex-end; 
            flex-wrap: wrap;
        }
        .control-group { flex: 1; min-width: 250px; }
        .control-label { font-weight: bold; font-size: 12px; display: block; margin-bottom: 5px; color: #555; }
        .control-input { width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box; }

        /* 7. Pivot Table Visual Tweaks */
        
        /* The Left Column (Unused Fields) */
        td.pvtUnused {
            min-width: 150px !important; /* Forces it to be smaller */
            max-width: 150px !important;
            width: 150px !important;
            overflow: hidden;
        }

        /* The Middle Column (Row Labels) */
        td.pvtAxisContainer, td.pvtVals {
            min-width: 150px !important; 
            max-width: 200px !important;
        }
        
        /* Make the list of fields look cleaner */
        li.ui-sortable-handle {
            font-size: 12px !important;
            padding: 5px !important;
            border-radius: 4px;
            background: #f8f9fa;
        }
        
        /* General Font Sizing for the table */
        table.pvtTable {
            font-size: 12px;
        }
